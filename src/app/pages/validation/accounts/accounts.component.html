<section class="container py-3">
  <app-breadcrumb></app-breadcrumb>

  <div class="container-statistic px-sm-2 px-md-5">
    <div class="row text-light text-left mt-4">
      <div class="col-sm d-flex flex-column bg-dark p-3">
        <p class="font-weight-bold mb-0">Monto Bajo</p>
        <!-- <span>Lorem ipsum dolor sit amet</span> -->
        <h4 class="mt-3">70%</h4>
        <div class="progress">
          <div class="progress-bar bg-success" role="progressbar" style="width: 70%" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100"></div>
        </div>
        <!-- <span class="mt-3">Lorem ipsum dolor sit amet</span> -->
      </div>
      <div class="col-sm d-flex flex-column bg-dark p-3">
        <p class="font-weight-bold mb-0">Monto Alto</p>
        <!-- <span>Lorem ipsum dolor sit amet</span> -->
        <h4 class="mt-3">30%</h4>
        <div class="progress">
          <div class="progress-bar bg-success" role="progressbar" style="width: 30%" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100"></div>
        </div>
        <!-- <span class="mt-3">Lorem ipsum dolor sit amet</span> -->
      </div>
      <div class="col-sm d-flex flex-column bg-dark p-3">
        <p class="font-weight-bold mb-0">Valor Compensaci√≥n Total</p>
        <!-- <span>Lorem ipsum dolor sit amet</span> -->
        <h4 class="mt-3">$240.500,06</h4>
        <div class="progress">
          <div class="progress-bar bg-success" role="progressbar" style="width: 25%" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100"></div>
        </div>
        <!-- <span class="mt-3">Lorem ipsum dolor sit amet</span> -->
      </div>
    </div>
  </div>

  <hr class="mt-5 mb-5" />

  <div class="container-add px-sm-2 px-md-5">
    <form autocomplete="off" [formGroup]="form" (ngSubmit)="onSubmit()">
      <div class="row text-light text-center">
        <div class="col-sm bg-primary py-1 mx-1">Monto(*)</div>
        <div class="col-sm bg-primary py-1 mx-1">Change Service(*)</div>
        <div class="col-sm bg-primary py-1 mx-1">Contract Code(*)</div>
      </div>
      <div class="row">
        <div class="col-sm mx-1 mt-1 p-0">
          <input class="form-control form-control-sm" type="number" formControlName="amount" [class.is-invalid]="invalidAmount" placeholder="Monto">
          <small class="text-danger" *ngIf="invalidAmount">{{ textsFormInvalid("amount") }}</small>
        </div>
        <div class="col-sm mx-1 mt-1 p-0">
          <input class="form-control form-control-sm" type="text" formControlName="changeService" [class.is-invalid]="invalidChangeService" placeholder="Change Service">
          <small class="text-danger" *ngIf="invalidChangeService">{{ textsFormInvalid("changeService") }}</small>
        </div>
        <div class="col-sm mx-1 mt-1 p-0">
          <input class="form-control form-control-sm" type="text" formControlName="contractCode" [class.is-invalid]="invalidContractCode" placeholder="Contract Code">
          <small class="text-danger" *ngIf="invalidContractCode">{{ textsFormInvalid("contractCode") }}</small>
        </div>
      </div>
      <div class="row text-light text-center mt-4">
        <div class="col-sm bg-primary py-1 mx-1">Contract ID(*)</div>
        <div class="col-sm bg-primary py-1 mx-1">Customer ID(*)</div>
        <div class="col-sm bg-primary py-1 mx-1">Customer Number(*)</div>
        <div class="col-sm bg-primary py-1 mx-1">Valid From(*)</div>
      </div>
      <div class="row text-light text-left mt-1">
        <div class="col-sm mx-1 mt-1 p-0">
          <input class="form-control form-control-sm" type="text" formControlName="contractId" [class.is-invalid]="invalidContractId" placeholder="Contract ID">
          <small class="text-danger" *ngIf="invalidContractId">{{ textsFormInvalid("contractId") }}</small>
        </div>
        <div class="col-sm mx-1 mt-1 p-0">
          <input class="form-control form-control-sm" type="text" formControlName="customerId" [class.is-invalid]="invalidCustomerId" placeholder="Customer ID">
          <small class="text-danger" *ngIf="invalidCustomerId">{{ textsFormInvalid("customerId") }}</small>
        </div>
        <div class="col-sm mx-1 mt-1 p-0">
          <input class="form-control form-control-sm" type="text" formControlName="customerNumber" [class.is-invalid]="invalidCustomerNumber" placeholder="Customer Number">
          <small class="text-danger" *ngIf="invalidCustomerNumber">{{ textsFormInvalid("customerNumber") }}</small>
        </div>
        <div class="col-sm mx-1 mt-1 p-0">
          <p-calendar
            [showIcon]="true"
            formControlName="validFrom"
            placeholder="yyyy-mm-dd"
            dateFormat="yy-mm-dd"
          ></p-calendar>
          <small class="text-danger" *ngIf="invalidValidFrom">{{ textsFormInvalid("validFrom") }}</small>
        </div>
      </div>
      <div class="row text-light text-center mt-4">
        <div class="col-sm container-buttons">
          <button type="submit" class="btn btn-primary mr-3 btn-sm">{{ (actionForm === 'create' ? 'Crear' : 'Actualizar' )}}</button>
          <button type="button" class="btn btn-secondary btn-sm" (click)="cleanForm()">Limpiar</button>
        </div>
      </div>
    </form>
  </div>

  <hr class="mt-5 mb-5" />

  <app-table [dataBase]="dataToTable" [structure]="structure"
    [buttons]="['edit', 'delete']"
    (editRecord)="updateAccount($event)"
    (deleteRecord)="deleteAccount($event)"
  ></app-table>
  <div *ngIf="dataToTable" class="text-center justify-content-center">
    <button type="button" class="btn btn-primary mr-3 btn-sm" (click)="downloadDataTable()">Descargar CSV</button>
  </div>
</section>
